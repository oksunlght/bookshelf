{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAmBC,SAASC,cAAc,yBAC1CC,EAAWF,SAASC,cAAc,aAClCE,EAAgBH,SAASC,cAAc,iBACvCG,EAAgBJ,SAASC,cAAc,iBACvCI,EAAWL,SAASC,cAAc,cAkCxC,SAASK,EAAgBC,GACvB,IAAQC,EAAsDD,EAAtDC,OAAQC,EAA8CF,EAA9CE,WAAYC,EAAkCH,EAAlCG,UAAWC,EAAuBJ,EAAvBI,YAAaC,EAAUL,EAAVK,MAG9CC,EADaH,EAAUI,QAAO,SAAAC,G,MAAuB,WAAhBA,EAAJC,I,IACHC,KAClC,SAAAF,G,IAAGG,EAAGH,EAAHG,I,MAAU,YAAgBC,OAAJD,EAAI,wC,IAIzBE,EADiBV,EAAUI,QAAO,SAAAC,G,MAAuB,gBAAhBA,EAAJC,I,IACCC,KAC1C,SAAAF,G,IAAGG,EAAGH,EAAHG,I,MAAU,YAAgBC,OAAJD,EAAI,6C,IAGzBG,EAAc,mBACcF,OAApBV,EAAW,WAEIU,OAFKP,EAAM,kGAGXO,OADAP,EAAM,wCAEDO,OADLX,EAAO,4CAGNW,OAFIR,EAAY,oEAGhBQ,OADAN,EAAiB,yCACIM,OAArBC,EAAqB,sCAKnDjB,EAAcmB,UAAYD,EAC1BnB,EAASqB,UAAUC,OAAO,Y,CAG5B,SAASC,IACPvB,EAASqB,UAAUG,IAAI,Y,CA/DzB3B,EAAiB4B,iBAAiB,SAAS,SAAAC,GACzCA,EAAEC,iBACF,IAAMC,EAAkBF,EAAEG,OAAOC,QAAQ,0BAEzC,GAAKF,EAAL,CAIA,IAAMG,EAAiBH,EAAgBI,QAAQC,GAE/CtC,EAAAuC,QAAeC,YAAYJ,GAAgBK,KAAKhC,EAL9C,C,IAQJD,EAASsB,iBAAiB,SAAS,SAAAC,GACjCA,EAAEC,iBAEF,IAAMU,EAAeX,EAAEG,OAAOC,QAAQ,oBAEtC,GAAKO,EAAL,CAGA,IAAMN,EAAiBM,EAAaL,QAAQC,GAE5CtC,EAAAuC,QAAeC,YAAYJ,GAAgBK,KAAKhC,EAJ9C,C,IAOJF,EAAcuB,iBAAiB,QAASF,GAExCe,OAAOb,iBAAiB,WAsCxB,SAAuBC,GACrB,GAAI1B,EAASqB,UAAUkB,SAAS,aAC9B,OAEF,GAAe,WAAXb,EAAEc,KACJ,OAGFjB,G,IA5CFvB,EAASyB,iBAAiB,SA+C1B,SAA6BC,GAC3B,GAAIA,EAAEG,SAAWH,EAAEe,cACjB,OAGFlB,G","sources":["src/js/modal.js"],"sourcesContent":["import BookApiService from './fetch-api';\n\nconst catgoryBooksList = document.querySelector('.single-category-list');\nconst backdrop = document.querySelector('.backdrop');\nconst bookContainer = document.querySelector('.book-wrapper');\nconst closeModalBtn = document.querySelector('.pop-up-close');\nconst homePage = document.querySelector('.home-wrap');\n\ncatgoryBooksList.addEventListener('click', e => {\n  e.preventDefault();\n  const selectedElement = e.target.closest('.single-category__item');\n\n  if (!selectedElement) {\n    return;\n  }\n\n  const selectedBookId = selectedElement.dataset.id;\n\n  BookApiService.getBookByID(selectedBookId).then(renderBookPopUp);\n});\n\nhomePage.addEventListener('click', e => {\n  e.preventDefault();\n\n  const selectedItem = e.target.closest('.home__book-item');\n\n  if (!selectedItem) {\n    return;\n  }\n  const selectedBookId = selectedItem.dataset.id;\n\n  BookApiService.getBookByID(selectedBookId).then(renderBookPopUp);\n});\n\ncloseModalBtn.addEventListener('click', onModalClose);\n\nwindow.addEventListener('keydown', handleKeyDown);\n\nbackdrop.addEventListener('click', handleBackdropClick);\n\nfunction renderBookPopUp(book) {\n  const { author, book_image, buy_links, description, title } = book;\n\n  const amazonLink = buy_links.filter(({ name }) => name === 'Amazon');\n  const amazonLinkMarkup = amazonLink.map(\n    ({ url }) => `<a href=\"${url}\" target=”_blank” class=\"amazon\"></a>`\n  );\n\n  const appleBooksLink = buy_links.filter(({ name }) => name === 'Apple Books');\n  const appleBooksLinkMarkup = appleBooksLink.map(\n    ({ url }) => `<a href=\"${url}\" target=”_blank” class=\"apple-books\"></a>`\n  );\n\n  const popUpMarkup = `\n    <img src=\"${book_image}\" alt=\"${title}\" class=\"pop-book-image\" />\n    <div class=\"book-description\">\n    <h2 class=\"pop-up-title\">${title}</h2>\n    <p class=\"pop-up-author\">${author}</p>\n    <p class=\"pop-up-description\">${description}</p>\n    <ul class=\"buy-links\">\n    <li class=\"buy-link-item\">${amazonLinkMarkup}</li>\n    <li class=\"buy-link-item\">${appleBooksLinkMarkup}</li>\n    </ul>\n    </div>\n    `;\n\n  bookContainer.innerHTML = popUpMarkup;\n  backdrop.classList.remove('is-hidden');\n}\n\nfunction onModalClose() {\n  backdrop.classList.add('is-hidden');\n}\n\nfunction handleKeyDown(e) {\n  if (backdrop.classList.contains('is-hidden')) {\n    return;\n  }\n  if (e.code !== 'Escape') {\n    return;\n  }\n\n  onModalClose();\n}\n\nfunction handleBackdropClick(e) {\n  if (e.target !== e.currentTarget) {\n    return;\n  }\n\n  onModalClose();\n}\n"],"names":["$18yUV","parcelRequire","$40873ecf3c18e122$var$catgoryBooksList","document","querySelector","$40873ecf3c18e122$var$backdrop","$40873ecf3c18e122$var$bookContainer","$40873ecf3c18e122$var$closeModalBtn","$40873ecf3c18e122$var$homePage","$40873ecf3c18e122$var$renderBookPopUp","book","author","book_image","buy_links","description","title","amazonLinkMarkup","filter","param","name","map","url","concat","appleBooksLinkMarkup","popUpMarkup","innerHTML","classList","remove","$40873ecf3c18e122$var$onModalClose","add","addEventListener","e","preventDefault","selectedElement","target","closest","selectedBookId","dataset","id","default","getBookByID","then","selectedItem","window","contains","code","currentTarget"],"version":3,"file":"index.83efe7b3.js.map"}