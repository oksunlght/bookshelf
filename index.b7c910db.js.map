{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAeC,SAASC,cAAc,uBACtCC,EAAWF,SAASC,cAAc,kBAClCE,EAAYH,SAASC,cAAc,UACnCG,EAAeJ,SAASC,cAAc,yBACtCI,EAAsBL,SAASC,cAAc,cAyBnD,SAASK,EAAuBC,EAAUC,GACxC,MAAMC,EAASD,EACZE,KAAI,EAACC,IAAEA,EAAGC,OAAEA,EAAMC,WAAEA,EAAUC,MAAEA,KACxB,8CAA8CH,8BAEzCE,WAAoBC,qEACRA,uCACCF,6BAI1BG,KAAK,IAERZ,EAAUa,UAAYT,EACtBF,EAAoBY,UAAUC,IAAI,mBAClCd,EAAaa,UAAUE,OAAO,mBAC9Bf,EAAaY,UAAYP,C,CAY3B,SAASW,EAAcC,GACrB,MAAMC,EAAgBD,EAAiBE,MAAM,KACvCC,EAAwBF,EAAcG,OAAS,EAC/CC,EAAmBJ,EAAcK,OAAOH,EAAuB,GAGrE,MADoB,8BADGF,EAAcP,KAAK,+CACiEW,e,CAxD7G3B,EAAa6B,iBAAiB,SAG9B,SAAyBC,GACvB,MAAMR,EAAmBQ,EAAEC,OAAOC,QAAQC,KAE1C,IAAKX,EACH,OAKF,GAFAQ,EAAEI,iBAEwB,MAAtBJ,EAAEC,OAAOI,SACX,QA6BJ,SAA0BL,GACxB,MAAMM,EAAiBnC,SAASC,cAAc,WAE1CkC,IAAmBN,EAAEC,QACvBK,EAAelB,UAAUE,OAAO,UAElCU,EAAEC,OAAOb,UAAUC,IAAI,S,EAhCvBkB,CAAiBP,GAEjBhC,EAAAwC,QAAeC,mBAAmBjB,GAAkBkB,MAAKC,GACvDlC,EAAuBc,EAAcC,GAAmBmB,I,IAlB5DtC,EAAS0B,iBAAiB,SA2D1B,SAAwBC,GACtB,MAAMR,EAAmBQ,EAAEC,OAAOC,QAAQC,KACpCG,EAAiBnC,SAASC,cAAc,WACxCwC,EAAiBzC,SAASC,cAC9B,gBAAgBoB,OAGlB,IAAKA,EACH,OAKF,GAFAQ,EAAEI,iBAEwB,WAAtBJ,EAAEC,OAAOI,SACX,OAGEC,IAAmBd,GACrBc,EAAelB,UAAUE,OAAO,UAGlCsB,EAAexB,UAAUC,IAAI,UAE7BrB,EAAAwC,QAAeC,mBAAmBjB,GAAkBkB,MAAKC,GACvDlC,EAAuBc,EAAcC,GAAmBmB,I","sources":["src/js/category.js"],"sourcesContent":["import BookApiService from './fetch-api';\n\nconst categoryName = document.querySelector('.category-container');\nconst homePage = document.querySelector('.books-wrapper');\nconst pageTitle = document.querySelector('.title');\nconst categoryList = document.querySelector('.single-category-list');\nconst popularBooksWrapper = document.querySelector('.home-wrap');\n\ncategoryName.addEventListener('click', onCategoryClick);\nhomePage.addEventListener('click', onMoreBtnClick);\n\nfunction onCategoryClick(e) {\n  const selectedCategory = e.target.dataset.list;\n\n  if (!selectedCategory) {\n    return;\n  }\n\n  e.preventDefault();\n\n  if (e.target.nodeName !== 'A') {\n    return;\n  }\n\n  handleActiveLink(e);\n\n  BookApiService.getBooksByCategory(selectedCategory).then(data =>\n    onBooksByCategoryFetch(addTitleStyle(selectedCategory), data)\n  );\n}\n\nfunction onBooksByCategoryFetch(category, books) {\n  const markup = books\n    .map(({ _id, author, book_image, title }) => {\n      return `<li class=\"single-category__item\" data-id=\"${_id}\">\n    \n      <img src=\"${book_image}\" alt=\"${title}\" class=\"single-category__image\" />\n      <p class=\"book-title\">${title}</p>\n      <p class=\"book-author\">${author}</p>\n    \n      </li>`;\n    })\n    .join('');\n\n  pageTitle.innerHTML = category;\n  popularBooksWrapper.classList.add('visually-hidden');\n  categoryList.classList.remove('visually-hidden');\n  categoryList.innerHTML = markup;\n}\n\nfunction handleActiveLink(e) {\n  const activeCategory = document.querySelector('.active');\n\n  if (activeCategory !== e.target) {\n    activeCategory.classList.remove('active');\n  }\n  e.target.classList.add('active');\n}\n\nfunction addTitleStyle(selectedCategory) {\n  const categoryArray = selectedCategory.split(' ');\n  const categoryLastElemIndex = categoryArray.length - 1;\n  const lastTitleElement = categoryArray.splice(categoryLastElemIndex, 1);\n  const remainingTitle = categoryArray.join(' ');\n  const styledTitle = `<h2 class=\"category-title\">${remainingTitle} <span class=\"category-title_highlight\">${lastTitleElement}</span></h2>`;\n  return styledTitle;\n}\n\nfunction onMoreBtnClick(e) {\n  const selectedCategory = e.target.dataset.list;\n  const activeCategory = document.querySelector('.active');\n  const chosenCategory = document.querySelector(\n    `a[data-list='${selectedCategory}']`\n  );\n\n  if (!selectedCategory) {\n    return;\n  }\n\n  e.preventDefault();\n\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  if (activeCategory !== selectedCategory) {\n    activeCategory.classList.remove('active');\n  }\n\n  chosenCategory.classList.add('active');\n\n  BookApiService.getBooksByCategory(selectedCategory).then(data =>\n    onBooksByCategoryFetch(addTitleStyle(selectedCategory), data)\n  );\n}\n"],"names":["$i3bGI","parcelRequire","$ea48f741b5bc75f2$var$categoryName","document","querySelector","$ea48f741b5bc75f2$var$homePage","$ea48f741b5bc75f2$var$pageTitle","$ea48f741b5bc75f2$var$categoryList","$ea48f741b5bc75f2$var$popularBooksWrapper","$ea48f741b5bc75f2$var$onBooksByCategoryFetch","category","books","markup","map","_id","author","book_image","title","join","innerHTML","classList","add","remove","$ea48f741b5bc75f2$var$addTitleStyle","selectedCategory","categoryArray","split","categoryLastElemIndex","length","lastTitleElement","splice","addEventListener","e","target","dataset","list","preventDefault","nodeName","activeCategory","$ea48f741b5bc75f2$var$handleActiveLink","default","getBooksByCategory","then","data","chosenCategory"],"version":3,"file":"index.b7c910db.js.map"}