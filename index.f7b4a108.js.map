{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAeC,SAASC,cAAc,uBACtCC,EAAWF,SAASC,cAAc,kBAClCE,EAAYH,SAASC,cAAc,UACnCG,EAAeJ,SAASC,cAAc,yBACtCI,EAAsBL,SAASC,cAAc,cAyBnD,SAASK,EAAuBC,EAAUC,GACxC,IAAMC,EAASD,EACZE,KAAI,SAAAC,G,IAAGC,EAAGD,EAAHC,IAAKC,EAAMF,EAANE,OAAQC,EAAUH,EAAVG,WAAYC,EAAKJ,EAALI,MAC/B,MAAO,8CAEKC,OAFyCJ,EAAI,8BAEzBI,OAApBF,EAAW,WACCE,OADQD,EAAM,qEAEbC,OADDD,EAAM,uCACEC,OAAPH,EAAO,0B,IAIjCI,KAAK,IAERd,EAAUe,UAAYX,EACtBF,EAAoBc,UAAUC,IAAI,mBAClChB,EAAae,UAAUE,OAAO,mBAC9BjB,EAAac,UAAYT,C,CAY3B,SAASa,EAAcC,GACrB,IAAMC,EAAgBD,EAAiBE,MAAM,KACvCC,EAAwBF,EAAcG,OAAS,EAC/CC,EAAmBJ,EAAcK,OAAOH,EAAuB,GAC/DI,EAAiBN,EAAcP,KAAK,KAE1C,MADoB,8BAAuFD,OAAzDc,EAAe,4CAA2Dd,OAAjBY,EAAiB,e,CAxD9H7B,EAAagC,iBAAiB,SAG9B,SAAyBC,GACvB,IAAMT,EAAmBS,EAAEC,OAAOC,QAAQC,KAE1C,IAAKZ,EACH,OAKF,GAFAS,EAAEI,iBAEwB,MAAtBJ,EAAEC,OAAOI,SACX,QA6BJ,SAA0BL,GACxB,IAAMM,EAAiBtC,SAASC,cAAc,WAE1CqC,IAAmBN,EAAEC,QACvBK,EAAenB,UAAUE,OAAO,UAElCW,EAAEC,OAAOd,UAAUC,IAAI,S,EAhCvBmB,CAAiBP,GAEjBnC,EAAA2C,QAAeC,mBAAmBlB,GAAkBmB,MAAK,SAAAC,G,OACvDrC,EAAuBgB,EAAcC,GAAmBoB,E,OAlB5DzC,EAAS6B,iBAAiB,SA2D1B,SAAwBC,GACtB,IAAMT,EAAmBS,EAAEC,OAAOC,QAAQC,KACpCG,EAAiBtC,SAASC,cAAc,WACxC2C,EAAiB5C,SAASC,cAC9B,gBAAiCe,OAAjBO,EAAiB,OAGnC,IAAKA,EACH,OAKF,GAFAS,EAAEI,iBAEwB,WAAtBJ,EAAEC,OAAOI,SACX,OAGEC,IAAmBf,GACrBe,EAAenB,UAAUE,OAAO,UAGlCuB,EAAezB,UAAUC,IAAI,UAE7BvB,EAAA2C,QAAeC,mBAAmBlB,GAAkBmB,MAAK,SAAAC,G,OACvDrC,EAAuBgB,EAAcC,GAAmBoB,E","sources":["src/js/category.js"],"sourcesContent":["import BookApiService from './fetch-api';\n\nconst categoryName = document.querySelector('.category-container');\nconst homePage = document.querySelector('.books-wrapper');\nconst pageTitle = document.querySelector('.title');\nconst categoryList = document.querySelector('.single-category-list');\nconst popularBooksWrapper = document.querySelector('.home-wrap');\n\ncategoryName.addEventListener('click', onCategoryClick);\nhomePage.addEventListener('click', onMoreBtnClick);\n\nfunction onCategoryClick(e) {\n  const selectedCategory = e.target.dataset.list;\n\n  if (!selectedCategory) {\n    return;\n  }\n\n  e.preventDefault();\n\n  if (e.target.nodeName !== 'A') {\n    return;\n  }\n\n  handleActiveLink(e);\n\n  BookApiService.getBooksByCategory(selectedCategory).then(data =>\n    onBooksByCategoryFetch(addTitleStyle(selectedCategory), data)\n  );\n}\n\nfunction onBooksByCategoryFetch(category, books) {\n  const markup = books\n    .map(({ _id, author, book_image, title }) => {\n      return `<li class=\"single-category__item\" data-id=\"${_id}\">\n    \n      <img src=\"${book_image}\" alt=\"${title}\" class=\"single-category__image\" />\n      <p class=\"book-title\">${title}</p>\n      <p class=\"book-author\">${author}</p>\n    \n      </li>`;\n    })\n    .join('');\n\n  pageTitle.innerHTML = category;\n  popularBooksWrapper.classList.add('visually-hidden');\n  categoryList.classList.remove('visually-hidden');\n  categoryList.innerHTML = markup;\n}\n\nfunction handleActiveLink(e) {\n  const activeCategory = document.querySelector('.active');\n\n  if (activeCategory !== e.target) {\n    activeCategory.classList.remove('active');\n  }\n  e.target.classList.add('active');\n}\n\nfunction addTitleStyle(selectedCategory) {\n  const categoryArray = selectedCategory.split(' ');\n  const categoryLastElemIndex = categoryArray.length - 1;\n  const lastTitleElement = categoryArray.splice(categoryLastElemIndex, 1);\n  const remainingTitle = categoryArray.join(' ');\n  const styledTitle = `<h2 class=\"category-title\">${remainingTitle} <span class=\"category-title_highlight\">${lastTitleElement}</span></h2>`;\n  return styledTitle;\n}\n\nfunction onMoreBtnClick(e) {\n  const selectedCategory = e.target.dataset.list;\n  const activeCategory = document.querySelector('.active');\n  const chosenCategory = document.querySelector(\n    `a[data-list='${selectedCategory}']`\n  );\n\n  if (!selectedCategory) {\n    return;\n  }\n\n  e.preventDefault();\n\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  if (activeCategory !== selectedCategory) {\n    activeCategory.classList.remove('active');\n  }\n\n  chosenCategory.classList.add('active');\n\n  BookApiService.getBooksByCategory(selectedCategory).then(data =>\n    onBooksByCategoryFetch(addTitleStyle(selectedCategory), data)\n  );\n}\n"],"names":["$18yUV","parcelRequire","$1b5243cbc9dc9139$var$categoryName","document","querySelector","$1b5243cbc9dc9139$var$homePage","$1b5243cbc9dc9139$var$pageTitle","$1b5243cbc9dc9139$var$categoryList","$1b5243cbc9dc9139$var$popularBooksWrapper","$1b5243cbc9dc9139$var$onBooksByCategoryFetch","category","books","markup","map","param","_id","author","book_image","title","concat","join","innerHTML","classList","add","remove","$1b5243cbc9dc9139$var$addTitleStyle","selectedCategory","categoryArray","split","categoryLastElemIndex","length","lastTitleElement","splice","remainingTitle","addEventListener","e","target","dataset","list","preventDefault","nodeName","activeCategory","$1b5243cbc9dc9139$var$handleActiveLink","default","getBooksByCategory","then","data","chosenCategory"],"version":3,"file":"index.f7b4a108.js.map"}