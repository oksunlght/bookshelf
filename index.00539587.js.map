{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAmBC,SAASC,cAAc,yBAC1CC,EAAWF,SAASC,cAAc,aAClCE,EAAgBH,SAASC,cAAc,iBACvCG,EAAgBJ,SAASC,cAAc,iBACvCI,EAAWL,SAASC,cAAc,cAkCxC,SAASK,EAAgBC,GACvB,MAAMC,OAAEA,EAAMC,WAAEA,EAAUC,UAAEA,EAASC,YAAEA,EAAWC,MAAEA,GAAUL,EAYxDM,EAAc,mBACNJ,WAAoBG,kGAELA,wCACAJ,4CACKG,oEAffD,EAAUI,QAAO,EAACC,KAAEA,KAAoB,WAATA,IACdC,KAClC,EAACC,IAAEA,KAAU,YAAYA,kFAGJP,EAAUI,QAAO,EAACC,KAAEA,KAAoB,gBAATA,IACVC,KAC1C,EAACC,IAAEA,KAAU,YAAYA,oFAgB3Bd,EAAce,UAAYL,EAC1BX,EAASiB,UAAUC,OAAO,Y,CAG5B,SAASC,IACPnB,EAASiB,UAAUG,IAAI,Y,CA/DzBvB,EAAiBwB,iBAAiB,SAASC,IACzCA,EAAEC,iBACF,MAAMC,EAAkBF,EAAEG,OAAOC,QAAQ,0BAEzC,IAAKF,EACH,OAGF,MAAMG,EAAiBH,EAAgBI,QAAQC,GAE/ClC,EAAAmC,QAAeC,YAAYJ,GAAgBK,KAAK5B,EAAgB,IAGlED,EAASkB,iBAAiB,SAASC,IACjCA,EAAEC,iBAEF,MAAMU,EAAeX,EAAEG,OAAOC,QAAQ,oBAEtC,IAAKO,EACH,OAEF,MAAMN,EAAiBM,EAAaL,QAAQC,GAE5ClC,EAAAmC,QAAeC,YAAYJ,GAAgBK,KAAK5B,EAAgB,IAGlEF,EAAcmB,iBAAiB,QAASF,GAExCe,OAAOb,iBAAiB,WAsCxB,SAAuBC,GACrB,GAAItB,EAASiB,UAAUkB,SAAS,aAC9B,OAEF,GAAe,WAAXb,EAAEc,KACJ,OAGFjB,G,IA5CFnB,EAASqB,iBAAiB,SA+C1B,SAA6BC,GAC3B,GAAIA,EAAEG,SAAWH,EAAEe,cACjB,OAGFlB,G","sources":["src/js/modal.js"],"sourcesContent":["import BookApiService from './fetch-api';\n\nconst catgoryBooksList = document.querySelector('.single-category-list');\nconst backdrop = document.querySelector('.backdrop');\nconst bookContainer = document.querySelector('.book-wrapper');\nconst closeModalBtn = document.querySelector('.pop-up-close');\nconst homePage = document.querySelector('.home-wrap');\n\ncatgoryBooksList.addEventListener('click', e => {\n  e.preventDefault();\n  const selectedElement = e.target.closest('.single-category__item');\n\n  if (!selectedElement) {\n    return;\n  }\n\n  const selectedBookId = selectedElement.dataset.id;\n\n  BookApiService.getBookByID(selectedBookId).then(renderBookPopUp);\n});\n\nhomePage.addEventListener('click', e => {\n  e.preventDefault();\n\n  const selectedItem = e.target.closest('.home__book-item');\n\n  if (!selectedItem) {\n    return;\n  }\n  const selectedBookId = selectedItem.dataset.id;\n\n  BookApiService.getBookByID(selectedBookId).then(renderBookPopUp);\n});\n\ncloseModalBtn.addEventListener('click', onModalClose);\n\nwindow.addEventListener('keydown', handleKeyDown);\n\nbackdrop.addEventListener('click', handleBackdropClick);\n\nfunction renderBookPopUp(book) {\n  const { author, book_image, buy_links, description, title } = book;\n\n  const amazonLink = buy_links.filter(({ name }) => name === 'Amazon');\n  const amazonLinkMarkup = amazonLink.map(\n    ({ url }) => `<a href=\"${url}\" target=”_blank” class=\"amazon\"></a>`\n  );\n\n  const appleBooksLink = buy_links.filter(({ name }) => name === 'Apple Books');\n  const appleBooksLinkMarkup = appleBooksLink.map(\n    ({ url }) => `<a href=\"${url}\" target=”_blank” class=\"apple-books\"></a>`\n  );\n\n  const popUpMarkup = `\n    <img src=\"${book_image}\" alt=\"${title}\" class=\"pop-book-image\" />\n    <div class=\"book-description\">\n    <h2 class=\"pop-up-title\">${title}</h2>\n    <p class=\"pop-up-author\">${author}</p>\n    <p class=\"pop-up-description\">${description}</p>\n    <ul class=\"buy-links\">\n    <li class=\"buy-link-item\">${amazonLinkMarkup}</li>\n    <li class=\"buy-link-item\">${appleBooksLinkMarkup}</li>\n    </ul>\n    </div>\n    `;\n\n  bookContainer.innerHTML = popUpMarkup;\n  backdrop.classList.remove('is-hidden');\n}\n\nfunction onModalClose() {\n  backdrop.classList.add('is-hidden');\n}\n\nfunction handleKeyDown(e) {\n  if (backdrop.classList.contains('is-hidden')) {\n    return;\n  }\n  if (e.code !== 'Escape') {\n    return;\n  }\n\n  onModalClose();\n}\n\nfunction handleBackdropClick(e) {\n  if (e.target !== e.currentTarget) {\n    return;\n  }\n\n  onModalClose();\n}\n"],"names":["$i3bGI","parcelRequire","$8a7e756c566dd1ea$var$catgoryBooksList","document","querySelector","$8a7e756c566dd1ea$var$backdrop","$8a7e756c566dd1ea$var$bookContainer","$8a7e756c566dd1ea$var$closeModalBtn","$8a7e756c566dd1ea$var$homePage","$8a7e756c566dd1ea$var$renderBookPopUp","book","author","book_image","buy_links","description","title","popUpMarkup","filter","name","map","url","innerHTML","classList","remove","$8a7e756c566dd1ea$var$onModalClose","add","addEventListener","e","preventDefault","selectedElement","target","closest","selectedBookId","dataset","id","default","getBookByID","then","selectedItem","window","contains","code","currentTarget"],"version":3,"file":"index.00539587.js.map"}